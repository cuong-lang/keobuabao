{% extends "layout.html" %}

{% block css %}
<style>
    /* === TH√äM CSS ƒê·ªÇ S·ª¨A GIAO DI·ªÜN === */
    main.container {
        background: transparent;
        box-shadow: none;
        color: #ecf0f1;
    }
    .nav-tabs .nav-link {
        color: rgba(255, 255, 255, 0.7);
        border: none;
        border-bottom: 3px solid transparent;
    }
    .nav-tabs .nav-link.active {
        color: #ffffff;
        border-bottom: 3px solid #8e44ad;
        background-color: transparent;
        font-weight: bold;
    }
    .nav-tabs {
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    .tab-content {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 0 0 18px 18px;
        padding: 20px;
        color: #333; /* Ch·ªØ trong b·∫£ng s·∫Ω l√† m√†u t·ªëi */
    }
    .table {
        border-radius: 10px;
        overflow: hidden; /* Gi·ªØ bo g√≥c cho a */
    }
    .table a {
        color: #007bff;
        font-weight: 500;
    }
    .table a:hover {
        text-decoration: underline;
    }
    /* === K·∫æT TH√öC CSS TH√äM === */

    /* CSS c≈© c·ªßa b·∫°n (Gi·ªØ nguy√™n) */
    .table th, .table td {
        text-align: center;
        vertical-align: middle;
    }
    .win-rate { font-weight: bold; }
</style>
{% endblock css %}

{% block content %}
<h1 class="text-center mb-4">B·∫£ng X·∫øp H·∫°ng</h1>

<ul class="nav nav-tabs" id="leaderboardTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="pvp-tab" data-toggle="tab" href="#pvp" role="tab" aria-controls="pvp" aria-selected="true">üèÜ PvP Ti√™u chu·∫©n</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="baucua-tab" data-toggle="tab" href="#baucua" role="tab" aria-controls="baucua" aria-selected="false">üí∞ B·∫ßu Cua (ƒê·∫°i gia)</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="forbidden-tab" data-toggle="tab" href="#forbidden" role="tab" aria-controls="forbidden" aria-selected="false">üé≤ T·ª≠ C·∫•m (Th·∫ßn b√†i)</a>
    </li>
</ul>

<div class="tab-content" id="leaderboardTabContent">

    <div class="tab-pane fade show active" id="pvp" role="tabpanel" aria-labelledby="pvp-tab">
        <table class="table table-striped table-hover shadow-sm mt-3">
            <thead class="thead-dark">
                <tr>
                    <th>H·∫°ng</th> <th>Ng∆∞·ªùi ch∆°i</th> <th>Th·∫Øng</th> <th>ƒê√£ ch∆°i</th> <th>T·ª∑ l·ªá th·∫Øng</th>
                </tr>
            </thead>
            <tbody>
                {% for person in boards %}
                <tr>
                    <td><strong>{{ loop.index }}</strong></td>
                    <td><a href="{{ url_for('main.profile_page', username=person.username ) }}">{{ person.username }}</a></td>
                    <td style="color: #28a745; font-weight: bold;">{{ person.wins }}</td>
                    <td>{{ person.get('played', 0) }}</td>
                    <td class="win-rate">
                        {% set played = person.get('played', 0) %}
                        {% if played > 0 %}{% set win_rate = (person.wins / played) * 100 %}{{ "%.2f"|format(win_rate) }}%{% else %}0.00%{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="baucua" role="tabpanel" aria-labelledby="baucua-tab">
        <table class="table table-striped table-hover shadow-sm mt-3">
            <thead class="thead-dark">
                <tr>
                    <th>H·∫°ng</th> <th>Ng∆∞·ªùi ch∆°i</th> <th>T·ªïng ti·ªÅn th·∫Øng (Net)</th>
                </tr>
            </thead>
            <tbody>
                {% for person in baucua_boards %}
                <tr>
                    <td><strong>{{ loop.index }}</strong></td>
                    <td><a href="{{ url_for('main.profile_page', username=person.username ) }}">{{ person.username }}</a></td>
                    <td style="color: #f1c40f; font-weight: bold;">{{ person.get('baucua_winnings', 0) }}v</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="forbidden" role="tabpanel" aria-labelledby="forbidden-tab">
        <table class="table table-striped table-hover shadow-sm mt-3">
            <thead class="thead-dark">
                <tr>
                    <th>H·∫°ng</th> <th>Ng∆∞·ªùi ch∆°i</th> <th>S·ªë l·∫ßn th·∫Øng (Qua 5 v√≤ng)</th>
                </tr>
            </thead>
            <tbody>
                {% for person in forbidden_boards %}
                <tr>
                    <td><strong>{{ loop.index }}</strong></td>
                    <td><a href="{{ url_for('main.profile_page', username=person.username ) }}">{{ person.username }}</a></td>
                    <td style="color: #dc3545; font-weight: bold;">{{ person.get('forbidden_wins', 0) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}