{% extends "layout.html" %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/lobby.css') }}">
{% endblock css %}

{% block content %}
<div class="header text-center">
    <h1 style="font-weight: 700;">Game Lobby</h1>
    <p class="lead" style="color: rgba(255,255,255,0.8);">Ch√†o m·ª´ng, {{ username }}!</p>
</div>

<div id="room-management">
    <div class="row">
        <div class="col-md-6">
            <h2>ƒê·∫•u PvP Ti√™u Chu·∫©n</h2>
            <form id="create-room-form">

                <input type="text" id="create_room_id_custom" class="form-control mb-2" placeholder="T·ª± nh·∫≠p m√£ ph√≤ng (v√≠ d·ª•: 'phong1')">

                <input type="text" id="create_password" class="form-control mb-2" placeholder="M·∫≠t kh·∫©u (b·ªè tr·ªëng n·∫øu kh√¥ng c·∫ßn)">

                <button type="submit" id="create_room_btn" class="btn btn-primary btn-block">Create Game (PvP)</button>
            </form>
            <hr style="background-color: rgba(255,255,255,0.2);">
            <button type="submit" id="quick_match_btn" class="btn btn-warning btn-block">Quick Match (T√¨m tr·∫≠n PvP)</button>
        </div>

        <div class="col-md-6">
            <h2>Ph√≤ng PvP ƒêang Ch·ªù (1 Ng∆∞·ªùi)</h2>
            <div id="room-list-container" class="mb-3" style="max-height: 300px; overflow-y: auto; border: 1px solid #6a1b9a; border-radius: 5px;">
                <ul id="pvp-waiting-rooms" class="list-group" style="margin: 0; padding: 0;">
                    <li class="list-group-item d-flex justify-content-between align-items-center bg-dark text-white-50">
                        ƒêang t·∫£i danh s√°ch ph√≤ng...
                    </li>
                </ul>
            </div>
            <p class="text-white-50"><small>Nh·∫•n v√†o ph√≤ng, sau ƒë√≥ Join/Spectate.</small></p>

            <form id="join-room-form-new">
                <input type="hidden" id="selected-room-id">
                <input type="password" id="join_password_new" class="form-control mb-2 hidden" placeholder="Nh·∫≠p M·∫≠t kh·∫©u ph√≤ng">
                <div class="btn-group btn-block" role="group">
                    <button type="submit" id="join_room_btn_new" class="btn btn-success" style="width: 50%;" disabled>Join Game</button>
                    <button type="button" id="spectate_room_btn_new" class="btn btn-info" style="width: 50%;" disabled>Spectate</button>
                </div>
            </form>

             <div id="room-code-display" class="mt-3 hidden">
                <h4>M√£ ph√≤ng c·ªßa b·∫°n: <span id="room-code"></span></h4>
                <p>G·ª≠i m√£ n√†y cho b·∫°n b√®!</p>
            </div>
        </div>
    </div>
</div>

<h2 class="game-hub-header">Ch·ªçn Ch·∫ø ƒê·ªô Ch∆°i Kh√°c</h2>

<div class="game-grid">

<a href="{{ url_for('game_baucua.baucua_entry') }}" class="game-card">
    <div class="card-image baucua"></div>
    <div class="card-content">
        <h3 class="card-title">üí∞ B·∫ßu Cua </h3>
        <p class="card-description">V√†o s·∫£nh B·∫ßu Cua, ƒë·∫∑t c∆∞·ª£c v√† quay s·ªë c√πng nhi·ªÅu ng∆∞·ªùi ch∆°i kh√°c. C∆∞·ª£c 10v, th∆∞·ªüng x8.</p>
    </div>
</a>

<a href="{{ url_for('game_forbidden.forbidden_entry') }}" class="game-card">
    <div class="card-image forbidden"></div>
    <div class="card-content">
        <h3 class="card-title">üé≤ Ch·∫ø ƒê·ªô T·ª≠ C·∫•m</h3>
        <p class="card-description">S·ªëng s√≥t qua 5 v√≤ng c·∫•m. C∆∞·ª£c 10v ƒë·ªÉ tham gia, th·∫Øng nh·∫≠n 100v. Ch∆°i c√πng b·∫°n b√®.</p>
    </div>
</a>

<a href="{{ url_for('game_card.index_card_game') }}" class="game-card">
    <div class="card-image cardgame"></div>
    <div class="card-content">
        <h3 class="card-title">üé¥ O·∫≥n T√π T√¨ </h3>
        <p class="card-description">Ch·∫ø ƒë·ªô ch∆°i chi·∫øn thu·∫≠t. M·ªói ng∆∞·ªùi c√≥ 6 th·∫ª (2 K√©o, 2 B√∫a, 2 Bao). D√πng h·∫øt th·∫ª ƒë·ªÉ ph√¢n ƒë·ªãnh th·∫Øng thua.</p>
    </div>
</a>

<a href="{{ url_for('game_ai.single_player_page') }}" class="game-card">
    <div class="card-image single"></div>
    <div class="card-content">
        <h3 class="card-title">ü§ñ Ch∆°i ƒê∆°n (Luy·ªán t·∫≠p)</h3>
        <p class="card-description">Luy·ªán t·∫≠p v·ªõi Bot ng·∫´u nhi√™n. Tr·ª£ l√Ω AI s·∫Ω ph√¢n t√≠ch th√≥i quen c·ªßa b·∫°n v√† ƒë∆∞a ra g·ª£i √Ω cho l∆∞·ª£t sau.</p>
    </div>
</a>

</div>

<div id="game-area" class="hidden">
    <div class="row">
        <div class="col-md-8">
            <h2 id="game-status" class="text-center">ƒêang ch·ªù ng∆∞·ªùi ch∆°i 2...</h2>
            <div class="leaderboard">
                 <div class="player1 text-center">
                    <h4 class="name1" id="player1_name_display">Player1 :</h4>
                    <span id="player1_score">0</span>
                </div>
                <div class="player2 text-center">
                    <h4 class="name2" id="player2_name_display">Player2:</h4>
                    <span id="player2_score">0</span>
                </div>
            </div>
            <div class="controls text-center" id="game-controls">
                <button type="submit" id="rock" class="btn btn-primary btn-lg">Rock</button>
                <button type="submit" id="paper" class="btn btn-info btn-lg">Paper</button>
                <button type="submit" id="scissor" class="btn btn-danger btn-lg">Scissor</button>
            </div>
            <div id="message" class="mt-3 text-center">...</div>
            <p id="prediction-display" class="text-center">ü§ñ AI G·ª£i √ù: ...</p>
            <div class="Leave mt-4 text-center">
                <button type="submit" id="leave_room_btn" class="btn btn-warning">Leave Room</button>
            </div>
        </div>
        <div class="col-md-4">
            <div id="chat-container">
                 <h3 class="text-center">Chat</h3>
                <div id="chat-box">
                    <p><em>Ch√†o m·ª´ng!</em></p>
                </div>
                <form id="chat-form" class="d-flex">
                    <input type="text" id="chat-input" class="form-control" placeholder="Nh·∫≠p tin nh·∫Øn...">
                    <button id="send-chat-btn" class="btn btn-success">G·ª≠i</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
    <script type="text/javascript">
        const username = `{{ username }}`;
    </script>
    <script src="{{ url_for('static', filename='socketio.js') }}"></script>
{% endblock scripts %}